{"ast":null,"code":"import{useParams}from\"react-router-dom\";import axiosClient from\"../api/axiosClient\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditPost=()=>{const[form,setForm]=useState({postTitle:\"\",postContent:\"\"});const navigate=useNavigate();const{id}=useParams();useEffect(()=>{const token=localStorage.getItem(\"token\");if(!token){navigate(\"/login\");return;}const fetchPost=async()=>{try{const res=await axiosClient.get(`/post/postsingle/${id}`);setForm({postTitle:res.data.postTitle,postContent:res.data.postContent});}catch{alert(\"Failed to fetch post.\");}};fetchPost();},[id,navigate]);const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleSubmit=async(e,postId)=>{e.preventDefault();try{await axiosClient.put(\"/post/post\",{postId:id,...form});alert(\"Post updated\");navigate(\"/\");}catch{alert(\"Update failed\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{name:\"postTitle\",value:form.postTitle,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"postContent\",value:form.postContent,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update Post\"})]})]});};export default EditPost;","map":{"version":3,"names":["useParams","axiosClient","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","EditPost","form","setForm","postTitle","postContent","navigate","id","token","localStorage","getItem","fetchPost","res","get","data","alert","handleChange","e","target","name","value","handleSubmit","postId","preventDefault","put","children","onSubmit","onChange","required","type"],"sources":["C:/Users/Junzhang Ren/Desktop/post-management-frontend/src/pages/EditPost.jsx"],"sourcesContent":["import { useParams } from \"react-router-dom\";\r\nimport axiosClient from \"../api/axiosClient\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst EditPost = () =>{\r\n  const [form, setForm] = useState({\r\n    postTitle:\"\",\r\n    postContent: \"\"\r\n  });\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n\r\n  useEffect(()=>{\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    const fetchPost = async () => {\r\n    try {\r\n      const res = await axiosClient.get(`/post/postsingle/${id}`);\r\n      setForm({\r\n        postTitle: res.data.postTitle,\r\n        postContent: res.data.postContent\r\n      });\r\n    } catch {\r\n      alert(\"Failed to fetch post.\");\r\n    }\r\n  };  \r\n\r\n  fetchPost();\r\n\r\n  },[id, navigate]);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({...form, [e.target.name]: e.target.value});\r\n  }\r\n\r\n  const handleSubmit = async (e, postId) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axiosClient.put(\"/post/post\", {\r\n        postId: id,\r\n        ...form\r\n      });\r\n      alert(\"Post updated\");\r\n      navigate(\"/\");\r\n    }catch {\r\n      alert(\"Update failed\");\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div> \r\n      <h2>Edit Post</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input \r\n          name=\"postTitle\"\r\n          value={form.postTitle}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <textarea          \r\n          name=\"postContent\"\r\n          value={form.postContent}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <button type=\"submit\">Update Post</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditPost;"],"mappings":"AAAA,OAASA,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,WAAW,KAAM,oBAAoB,CAC5C,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAK,CACpB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,CAC/BU,SAAS,CAAC,EAAE,CACZC,WAAW,CAAE,EACf,CAAC,CAAC,CACF,KAAM,CAAAC,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEW,EAAG,CAAC,CAAGf,SAAS,CAAC,CAAC,CAE1BG,SAAS,CAAC,IAAI,CACZ,KAAM,CAAAa,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACVF,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CAEA,KAAM,CAAAK,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAnB,WAAW,CAACoB,GAAG,CAAC,oBAAoBN,EAAE,EAAE,CAAC,CAC3DJ,OAAO,CAAC,CACNC,SAAS,CAAEQ,GAAG,CAACE,IAAI,CAACV,SAAS,CAC7BC,WAAW,CAAEO,GAAG,CAACE,IAAI,CAACT,WACxB,CAAC,CAAC,CACJ,CAAE,KAAM,CACNU,KAAK,CAAC,uBAAuB,CAAC,CAChC,CACF,CAAC,CAEDJ,SAAS,CAAC,CAAC,CAEX,CAAC,CAAC,CAACJ,EAAE,CAAED,QAAQ,CAAC,CAAC,CAEjB,KAAM,CAAAU,YAAY,CAAIC,CAAC,EAAK,CAC1Bd,OAAO,CAAC,CAAC,GAAGD,IAAI,CAAE,CAACe,CAAC,CAACC,MAAM,CAACC,IAAI,EAAGF,CAAC,CAACC,MAAM,CAACE,KAAK,CAAC,CAAC,CACrD,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAOJ,CAAC,CAAEK,MAAM,GAAK,CACxCL,CAAC,CAACM,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAA9B,WAAW,CAAC+B,GAAG,CAAC,YAAY,CAAE,CAClCF,MAAM,CAAEf,EAAE,CACV,GAAGL,IACL,CAAC,CAAC,CACFa,KAAK,CAAC,cAAc,CAAC,CACrBT,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,KAAM,CACLS,KAAK,CAAC,eAAe,CAAC,CACxB,CACF,CAAC,CAED,mBACEf,KAAA,QAAAyB,QAAA,eACE3B,IAAA,OAAA2B,QAAA,CAAI,WAAS,CAAI,CAAC,cAClBzB,KAAA,SAAM0B,QAAQ,CAAEL,YAAa,CAAAI,QAAA,eAC3B3B,IAAA,UACEqB,IAAI,CAAC,WAAW,CAChBC,KAAK,CAAElB,IAAI,CAACE,SAAU,CACtBuB,QAAQ,CAAEX,YAAa,CACvBY,QAAQ,MACT,CAAC,cACF9B,IAAA,aACEqB,IAAI,CAAC,aAAa,CAClBC,KAAK,CAAElB,IAAI,CAACG,WAAY,CACxBsB,QAAQ,CAAEX,YAAa,CACvBY,QAAQ,MACT,CAAC,cACF9B,IAAA,WAAQ+B,IAAI,CAAC,QAAQ,CAAAJ,QAAA,CAAC,aAAW,CAAQ,CAAC,EACtC,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}